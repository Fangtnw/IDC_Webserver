<!DOCTYPE html>
<html>
<head>
  <title>Console</title>
  <link rel="stylesheet" href="style.css">
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <div class="header">
    <h1>Referee Console</h1>
  </div>
  <div class="content">
    <form id="setPasswordForm">
      <label for="password">Set room id:</label>
      <input type="text" name="password" id="passwordInput">
      <button type="submitPassword">set</button>
    </form>
    <form id="commandForm">
      <label for="player">Publish to:</label>
      <select name="player" id="playerSelect">
        <option value="player1">Player 1</option>
        <option value="player2">Player 2</option>
        <option value="all">All</option>
      </select>
      <br>
      <label for="command">Command:</label>
      <select name="command" id="commandSelect">
        <option value="spawn_object">Spawn the object</option>
        <option value="start">Start the game</option>
      </select>
      <!-- <input type="text" name="status" id="statusInput"> -->
      <br>
      <button type="submit">Send</button>
  </div>
  

    <div id="commandOutput"></div>

  </form>

  <script>
    const socket = io();

    const commandForm = document.getElementById('commandForm');
    const setPasswordForm = document.getElementById('setPasswordForm');

    setPasswordForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const passwordInput = document.getElementById('passwordInput');
      const password = passwordInput.value;

      // Emit 'setPassword' event to the server
      socket.emit('setPassword', { password });

      passwordInput.value = ''; // Clear the input field
    });

    commandForm.addEventListener('submit', (e) => {
      e.preventDefault();

      const player = document.getElementById('playerSelect').value;
      const cmd = document.getElementById('commandSelect').value;

      const command = {
        player: player,
        server_command: cmd,
      };

      socket.emit('command', command);
    });

    socket.on('command', (data) => {
      // Display the command in the commandOutput div
      commandOutput.textContent = `Published command: ${JSON.stringify(data)}`;
    });

  </script>
</body>
</html>
